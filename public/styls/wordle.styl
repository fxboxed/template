// public/styls/wordle.styl
// Fix: empty/typing tiles must be readable even if global CSS sets color white.
// We scope variables under and set empty-tile text explicitly.
.wordle-game-wrap
  background alpha - 40%
  width fit-content
  margin 0rem auto
  padding 0rem 0 0
  //opacity 0
.game--wordle
  // Light mode defaults
  --w-empty-bg: rgba(0,0,0,0.03)
  --w-empty-border: rgba(0,0,0,0.22)
  --w-empty-text: rgba(0,0,0,0.92)

  --w-absent-bg: #3a3a3c
  --w-absent-border: #3a3a3c

  --w-present-bg: #b59f3b
  --w-present-border: #b59f3b

  --w-correct-bg: #538d4e
  --w-correct-border: #538d4e

  --w-key-bg: rgba(0,0,0,0.06)
  --w-key-border: rgba(0,0,0,0.14)
  --w-key-text: rgba(0,0,0,0.92)
  max-width: 424px
  margin 0 auto
  box-shadow: 0 4px 12px rgba(0,0,0,0.1)
  border-radius: 16px
  width: 100vw
  max-width 424px
  //border 1px solid red

@media (prefers-color-scheme: dark)
  .game--wordle
    --w-empty-bg: rgba(255,255,255,0.06)
    --w-empty-border: rgba(255,255,255,0.22)
    --w-empty-text: rgba(255,255,255,0.92)

    --w-key-bg: rgba(255,255,255,0.10)
    --w-key-border: rgba(255,255,255,0.14)
    --w-key-text: rgba(255,255,255,0.92)

.game__header
  display: grid
  gap: 10px
  margin-bottom: 14px
  //background green //alpha - 40%

.game__title
  margin: 0
  font-size: clamp(22px, 2.4vw, 34px)
  line-height: 1
  height 4rem
  display flex
  align-items center
  justify-content center
  //padding-bottom 8px
  text-align: center
  border-bottom: 1px solid alpha + 20%
.game__footer 
  padding 1rem
.game__sub,
.game__attempts,
.game__streak
  margin: 0
  opacity: 0.92
  margin auto

.game__countdown
  margin-left: 8px
  font-variant-numeric: tabular-nums

.game__attempts span
  margin-left: 8px
  font-variant-numeric: tabular-nums

.wordle
  display: grid
  gap: 18px
  align-items: start

.wordle__board
  display: grid
  gap: 8px
  justify-content: center
  user-select: none
  touch-action: manipulation

.wordle__row
  display: grid
  grid-template-columns: repeat(5, 1fr)
  gap: 8px

// Tiles
.wordle__tile
  width: clamp(44px, 10vw, 56px)
  height: clamp(44px, 10vw, 56px)
  display: grid
  place-items: center
  border-radius: 10px
  border: 2px solid var(--w-empty-border)
  background: var(--w-empty-bg)
  font-weight: 700
  font-size: clamp(18px, 4.2vw, 26px)
  text-transform: uppercase
  line-height: 1
  letter-spacing: 0.5px

// âœ… empty tiles: force readable text (protect against global `color: #fff`)
.wordle__tile[data-state="empty"]
  background: alpha //+ 20% //var(--w-empty-bg)
  //border-color: var(--w-empty-border)
  color: var(--w-empty-text) !important
  border none

// result tiles
.wordle__tile[data-state="absent"]
  background rgba(alpha - 70%, 0.4)
  //border-color: alpha - 20% //var(--w-absent-border)
  color: alpha  !important
  border none

.wordle__tile[data-state="present"]
  background: rgba(beta, 0.7)
   //orange + 60%//-present-bg)
  //border-color: beta - 20%  //var(--w-present-border)
  color: alpha + 60%  !important

.wordle__tile[data-state="correct"]
  background: rgba(green, .5) //var(--w-correct-bg)
  //border-color: var(--w-correct-border)
  border none
  color: alpha + 60%  !important
  //rder 1px solid orange
  //ckground red

// Keyboard
.wordle__keyboard
  display: grid
  gap: 6px
  justify-content: center
  //border 1px solid #000

.kb__row
  display: flex
  //gap: 5px
  justify-content: space-around //space-between //center
  //border 1px solid blue
  max-width 400px // 100%
  width 100vw
.kb__key
  appearance: none
  //border: 1px solid var(--w-key-border)
  background: alpha //var(--w-key-bg)
  color: alpha + 60% //var(--w-key-text)
  border-radius: 50% //12px
  padding: 8px 8px
  max-width: 32px
  max-height: 32px //46
  font-size 1rem
  height 30px
  width 30px

  font-weight: 700
  cursor: pointer
  touch-action: manipulation
  user-select: none
  display flex 
  align-items center
  justify-content center
  transition all 1s ease-in-out
  //background green
.wide-key
  //border 1px solid red
  border-radius none
  background: transparent
  font-size 1.3rem
  font-weight bold
  color alpha +80%
  width fit-content

.kb__key:active
  transform: translateY(1px)

// button.kb__key.kb__key--wide
//   //min-width: 72px
//   padding-left: 4px
//   padding-right: 4px
//   background transparent 
//   border-radius 0
//   width fit-content

.kb__key[data-state="absent"]
  background rgba(alpha - 70%, 0.4)
  //border-color: alpha - 20% //var(--w-absent-border)
  color: alpha  !important


.kb__key[data-state="present"]
  background: rgba(beta, 0.7)
  border none
  color: alpha + 50%//- 10%

.kb__key[data-state="correct"]
  background: rgba(green, .5)
  border-color: none
  color: alpha + 80%

// Footer / share
.game__footer
  margin-top: 14px
  display: grid
  gap: 10px

.game__actions
  display: flex
  justify-content: center
  gap: 10px
  flex-wrap: wrap
  color: alpha
  //background blue

button#wordle-resetBtn.btn.btn--ghost, button#wordle-helpBtn.btn.btn--ghost
    //background blue
    padding 8px 12px
    border 1px solid alpha //- 10%
    border-radius 8px
    color alpha + 40% //- 20%
.game__toast
  min-height: 20px
  font-size: 14px
  opacity: 0.95

.share
  margin-top: 10px
  padding: 12px
  border-radius: 14px
  border: 1px solid rgba(0,0,0,0.14)
  background: rgba(0,0,0,0.04)

@media (prefers-color-scheme: dark)
  .share
    border: 1px solid rgba(255,255,255,0.14)
    background: rgba(255,255,255,0.06)

.share__title
  margin: 0 0 8px 0

.share__text
  margin: 0
  white-space: pre-wrap
  word-break: break-word
  padding: 10px
  border-radius: 12px
  border: 1px solid rgba(0,0,0,0.12)
  background: rgba(0,0,0,0.06)
  font-variant-numeric: tabular-nums

@media (prefers-color-scheme: dark)
  .share__text
    border: 1px solid rgba(255,255,255,0.12)
    background: rgba(0,0,0,0.25)

.share__actions
  margin-top: 10px
  display: flex
  gap: 10px
  flex-wrap: wrap

// Animations
@keyframes wordleShake
  0%
    transform: translateX(0)
  20%
    transform: translateX(-6px)
  40%
    transform: translateX(6px)
  60%
    transform: translateX(-6px)
  80%
    transform: translateX(6px)
  100%
    transform: translateX(0)

.wordle__row.is-shake
  animation: wordleShake 0.42s ease-in-out

@keyframes wordleFlip
  0%
    transform: rotateX(0deg)
  50%
    transform: rotateX(90deg)
  100%
    transform: rotateX(0deg)

.wordle__row.is-revealing .wordle__tile
  transform-style: preserve-3d
  animation: wordleFlip 0.52s ease-in-out
  animation-delay: calc(var(--i, 0) * 80ms)

// @media (max-width: 420px)
//   .kb__key
//     height: 44px
//     padding: 8px 8px
//     border-radius: 11px

//   .kb__key--wide
//     min-width: 64px
